{{- if .enable -}}
<section id="features" class="features relative py-8 xl:py-32 overflow-hidden">
    <!-- Background decorations -->
    <div class="absolute top-20 right-0 w-72 h-72 bg-primary/5 rounded-full filter blur-3xl -z-10"></div>
    <div class="absolute bottom-20 left-0 w-72 h-72 bg-tertiary/5 rounded-full filter blur-3xl -z-10"></div>

    <div class="container mx-auto px-4">
        <h1
            class="feature-title-premium xl:max-w-2/3 mx-auto text-center text-[#252525] font-semibold text-4xl xl:text-5xl leading-tight mb-6 scroll-animate">
            {{ .title | safeHTML }}
        </h1>
        <p class="feature-text-premium xl:max-w-2xl mx-auto text-center text-[#868686] text-lg mb-16 scroll-animate"
            style="animation-delay: 0.2s;">
            {{ .text }}
        </p>
    </div>

    <div class="flex flex-col relative gap-20">
        {{- range $index, $item := .items -}}
        <div class="container mx-auto px-4 {{ if (mod $index 2) }}scroll-animate-left{{ else }}scroll-animate-right{{ end }}"
            style="animation-delay: {{ mul $index 0.2 }}s;">
            <div class="grid xl:grid-cols-12 gap-8 xl:gap-12 items-center">

                <!-- Text Content - Always First on Mobile -->
                <div
                    class="xl:col-span-5 flex flex-col justify-center gap-6 order-1 {{ if (mod $index 2) }}xl:order-1{{ else }}xl:order-1{{ end }}">
                    <div class="flex flex-col xl:flex-row items-center xl:items-start justify-start gap-4">
                        <div
                            class="feature-icon-premium flex items-center justify-center shrink-0 text-xl text-white bg-[{{ $item.color }}] size-16 rounded-2xl shadow-lg magnetic-button">
                            <i class="{{ $item.icon }}"></i>
                        </div>
                        <div class="inline-flex flex-col text-center xl:text-start">
                            <h2 class="feature-pretitle text-lg font-semibold text-stroke">{{ $item.pretitle }}</h2>
                            <p class="text-sm text-[#868686]">{{ $item.pretext }}</p>
                        </div>
                    </div>
                    <h1
                        class="feature-title-premium text-[#252525] font-bold text-3xl xl:text-4xl leading-tight text-center xl:text-start">
                        {{ $item.title | markdownify }}
                    </h1>
                    <p
                        class="feature-text-premium text-[#545454] text-base xl:text-lg leading-relaxed text-center xl:text-start">
                        {{ $item.text }}
                    </p>
                </div>

                <!-- Image - Always Second on Mobile, Alternates on Desktop -->
                <div
                    class="xl:col-span-7 flex items-center justify-center order-2 {{ if (mod $index 2) }}xl:order-2{{ else }}xl:order-1{{ end }}">
                    <div class="feature-image-wrapper relative group">
                        <!-- Premium multi-layer glow -->
                        <div class="feature-glow-layer"></div>

                        <!-- Corner accents -->
                        <div class="feature-corner-accent top-left"></div>
                        <div class="feature-corner-accent bottom-right"></div>

                        <!-- Image container with overlay -->
                        <div class="feature-image-container relative overflow-hidden rounded-2xl">
                            {{ $class := "feature-image-premium w-[85%] xl:w-[75%] mx-auto" }}
                            {{ partial "responsive-img.html" (dict "src" $item.image "alt" $item.title "class" $class)
                            }}
                            <!-- Gradient overlay on hover -->
                            <div class="feature-overlay-gradient"></div>

                            <!-- Floating particles -->
                            <div class="feature-particles"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        {{- end -}}
    </div>
</section>
{{- end -}}