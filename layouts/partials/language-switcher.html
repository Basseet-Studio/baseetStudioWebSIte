{{/* Language Switcher Partial - Sleek Design */}}
<div class="language-switcher">
    <button class="lang-toggle" aria-label="{{ i18n "language_switcher_label" }}" aria-expanded="false">
        <svg class="lang-globe" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="2" y1="12" x2="22" y2="12"></line>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
        </svg>
        <span class="current-lang">{{ if eq .Site.Language.Lang "en" }}EN{{ else }}Ø¹{{ end }}</span>
        <svg class="lang-arrow" width="10" height="10" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </button>
    <div class="lang-dropdown" aria-hidden="true">
        {{ range .Site.Home.AllTranslations }}
        <a href="{{ .RelPermalink }}" 
           class="lang-option {{ if eq $.Site.Language.Lang .Language.Lang }}active{{ end }}"
           lang="{{ .Language.Lang }}"
           {{ if eq .Language.LanguageDirection "rtl" }}dir="rtl"{{ end }}>
            {{ .Language.LanguageName }}
        </a>
        {{ end }}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const langToggle = document.querySelector('.lang-toggle');
    const langDropdown = document.querySelector('.lang-dropdown');
    
    if (langToggle && langDropdown) {
        langToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            const isExpanded = this.getAttribute('aria-expanded') === 'true';
            this.setAttribute('aria-expanded', !isExpanded);
            langDropdown.setAttribute('aria-hidden', isExpanded);
            langDropdown.classList.toggle('open');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.language-switcher')) {
                langToggle.setAttribute('aria-expanded', 'false');
                langDropdown.setAttribute('aria-hidden', 'true');
                langDropdown.classList.remove('open');
            }
        });
    }
});
</script>
