{{ define "main" }}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<!-- App Bar CSS -->
{{- $appBarCSS := resources.Get "css/app-bar.css" -}}
{{- if $appBarCSS -}}
  {{- if hugo.IsProduction -}}
    {{- $appBarCSS = $appBarCSS | minify | fingerprint -}}
  {{- end -}}
  <link rel="stylesheet" href="{{ $appBarCSS.RelPermalink }}" />
{{- end -}}

<!-- Custom Overrides CSS -->
{{- $overridesCSS := resources.Get "css/custom-overrides.css" -}}
{{- if $overridesCSS -}}
  {{- if hugo.IsProduction -}}
    {{- $overridesCSS = $overridesCSS | minify | fingerprint -}}
  {{- end -}}
  <link rel="stylesheet" href="{{ $overridesCSS.RelPermalink }}" />
{{- end -}}

<!-- Skip to content for keyboard users -->
<a class="skip-to-content" href="#mainContent">{{ i18n "skip_to_content" }}</a>

<!-- App Bar Header -->

<main id="mainContent" class="pt-24" {{ if eq .Site.Language.LanguageDirection "rtl" }}dir="rtl"{{ end }}>
  <!-- Hero Section -->
  <section class="py-16 xl:py-24 bg-gradient-to-b from-primary/5 to-white">
    <div class="container mx-auto px-4 text-center">
      <a href="{{ "/" | relLangURL }}" class="inline-flex items-center gap-2 text-[#545454] hover:text-primary mb-6 transition-colors {{ if eq .Site.Language.LanguageDirection "rtl" }}flex-row-reverse{{ end }}">
        <svg class="w-5 h-5 {{ if eq .Site.Language.LanguageDirection "rtl" }}rotate-180{{ end }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        {{ i18n "projects_back_home" }}
      </a>
      <h1 class="text-4xl xl:text-5xl font-bold text-[#252525] mb-4">{{ i18n "projects_page_title" }}</h1>
      <p class="text-xl text-[#545454] max-w-2xl mx-auto">{{ i18n "projects_page_description" }}</p>
    </div>
  </section>

  <!-- Projects Grid -->
  <section class="py-16 xl:py-24">
    <div class="container mx-auto px-4">
      {{- $projects := site.Data.home.projects -}}
      {{/* Project i18n key mappings */}}
      {{ $projectI18n := dict 
          "money-box" (dict "name" "project_moneybox_name" "tagline" "project_moneybox_tagline" "description" "project_moneybox_description" "status" "project_moneybox_status" "features" (slice "project_moneybox_feature_1" "project_moneybox_feature_2" "project_moneybox_feature_3" "project_moneybox_feature_4"))
          "numu" (dict "name" "project_numu_name" "tagline" "project_numu_tagline" "description" "project_numu_description" "status" "project_numu_status" "features" (slice "project_numu_feature_1" "project_numu_feature_2" "project_numu_feature_3" "project_numu_feature_4"))
          "photorestore-ai" (dict "name" "project_photorestore_name" "tagline" "project_photorestore_tagline" "description" "project_photorestore_description" "status" "project_photorestore_status" "features" (slice "project_photorestore_feature_1" "project_photorestore_feature_2" "project_photorestore_feature_3" "project_photorestore_feature_4" "project_photorestore_feature_5" "project_photorestore_feature_6"))
          "medical-education-app" (dict "name" "project_mai_name" "tagline" "project_mai_tagline" "description" "project_mai_description" "status" "project_mai_status" "features" (slice "project_mai_feature_1" "project_mai_feature_2" "project_mai_feature_3" "project_mai_feature_4" "project_mai_feature_5"))
          "nss-virtual-education-fair" (dict "name" "project_nss_name" "tagline" "project_nss_tagline" "description" "project_nss_description" "status" "project_nss_status" "features" (slice "project_nss_feature_1" "project_nss_feature_2" "project_nss_feature_3" "project_nss_feature_4" "project_nss_feature_5" "project_nss_feature_6"))
          "bd-railway-automated-timetable" (dict "name" "project_bdrailway_name" "tagline" "project_bdrailway_tagline" "description" "project_bdrailway_description" "status" "project_bdrailway_status" "features" (slice "project_bdrailway_feature_1" "project_bdrailway_feature_2" "project_bdrailway_feature_3" "project_bdrailway_feature_4" "project_bdrailway_feature_5" "project_bdrailway_feature_6"))
          "malaysian-business-websites" (dict "name" "project_malaysian_name" "tagline" "project_malaysian_tagline" "description" "project_malaysian_description" "status" "project_malaysian_status" "features" (slice "project_malaysian_feature_1" "project_malaysian_feature_2" "project_malaysian_feature_3" "project_malaysian_feature_4" "project_malaysian_feature_5" "project_malaysian_feature_6"))
          "deshikitchen" (dict "name" "project_deshikitchen_name" "tagline" "project_deshikitchen_tagline" "description" "project_deshikitchen_description" "status" "project_deshikitchen_status" "features" (slice "project_deshikitchen_feature_1" "project_deshikitchen_feature_2" "project_deshikitchen_feature_3" "project_deshikitchen_feature_4" "project_deshikitchen_feature_5" "project_deshikitchen_feature_6"))
      }}
      {{- if $projects.items -}}
      <div class="grid md:grid-cols-2 gap-8 xl:gap-12 max-w-5xl mx-auto">
        {{- range $projects.items -}}
        {{ $i18nKeys := index $projectI18n .slug }}
        {{ $projectName := cond (ne $i18nKeys nil) (i18n (index $i18nKeys "name")) .name }}
        {{ $projectTagline := cond (ne $i18nKeys nil) (i18n (index $i18nKeys "tagline")) .tagline }}
        {{ $projectDescription := cond (ne $i18nKeys nil) (i18n (index $i18nKeys "description")) .description }}
        {{ $projectStatus := cond (ne $i18nKeys nil) (i18n (index $i18nKeys "status")) .status }}
        <article class="group relative bg-white rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 overflow-hidden transform hover:-translate-y-2 border border-gray-100">
          <!-- Gradient Top Border -->
          <div class="absolute top-0 left-0 right-0 h-1.5" style="background: {{ .gradient | safeCSS }};"></div>
          
          <div class="p-8 xl:p-10">
            <!-- App Icon -->
            <div class="flex items-start justify-between mb-6 {{ if eq $.Site.Language.LanguageDirection "rtl" }}flex-row-reverse{{ end }}">
              <div class="w-20 h-20 rounded-2xl flex items-center justify-center text-white text-3xl font-bold shadow-lg transform group-hover:scale-110 transition-transform duration-300"
                   style="background: {{ .gradient | safeCSS }};">
                {{- if .iconClass -}}<i class="{{ .iconClass }}"></i>{{- else -}}{{ substr $projectName 0 1 }}{{- end -}}
              </div>
              {{- if .status -}}
              <span class="px-4 py-1.5 text-sm font-semibold rounded-full"
                    style="background: {{ .color }}20; color: {{ .color }};">
                {{ $projectStatus }}
              </span>
              {{- end -}}
            </div>

            <!-- App Name & Tagline -->
            <h2 class="text-2xl xl:text-3xl font-bold text-[#252525] mb-2 group-hover:text-primary transition-colors {{ if eq $.Site.Language.LanguageDirection "rtl" }}text-right{{ end }}">
              {{ $projectName }}
            </h2>
            <p class="text-lg font-medium mb-4 {{ if eq $.Site.Language.LanguageDirection "rtl" }}text-right{{ end }}" style="color: {{ .color }};">
              {{ $projectTagline }}
            </p>

            <!-- Description -->
            <p class="text-[#545454] leading-relaxed mb-6 {{ if eq $.Site.Language.LanguageDirection "rtl" }}text-right{{ end }}">
              {{ $projectDescription }}
            </p>

            <!-- Features -->
            {{- if and $i18nKeys (index $i18nKeys "features") -}}
            <ul class="grid grid-cols-2 gap-2 mb-6">
              {{- $projectColor := .color -}}
              {{- range first 4 (index $i18nKeys "features") -}}
              <li class="flex items-center text-sm text-[#545454] {{ if eq $.Site.Language.LanguageDirection "rtl" }}flex-row-reverse text-right{{ end }}">
                <svg class="w-4 h-4 {{ if eq $.Site.Language.LanguageDirection "rtl" }}ml-2{{ else }}mr-2{{ end }} flex-shrink-0" style="color: {{ $projectColor }};" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                {{ i18n . }}
              </li>
              {{- end -}}
            </ul>
            {{- else if .features -}}
            <ul class="grid grid-cols-2 gap-2 mb-6">
              {{- $projectColor := .color -}}
              {{- range first 4 .features -}}
              <li class="flex items-center text-sm text-[#545454] {{ if eq $.Site.Language.LanguageDirection "rtl" }}flex-row-reverse text-right{{ end }}">
                <svg class="w-4 h-4 {{ if eq $.Site.Language.LanguageDirection "rtl" }}ml-2{{ else }}mr-2{{ end }} flex-shrink-0" style="color: {{ $projectColor }};" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                {{ . }}
              </li>
              {{- end -}}
            </ul>
            {{- end -}}

            <!-- CTA -->
            <a href="{{ "/" | relLangURL }}projects/{{ .slug }}/" 
               class="inline-flex items-center gap-2 font-semibold transition-all duration-300 group/link {{ if eq $.Site.Language.LanguageDirection "rtl" }}flex-row-reverse{{ end }}"
               style="color: {{ .color }};">
              {{ i18n "projects_view_project" }}
              <svg class="w-5 h-5 transform group-hover/link:translate-x-1 transition-transform {{ if eq $.Site.Language.LanguageDirection "rtl" }}rotate-180 group-hover/link:-translate-x-1{{ end }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
              </svg>
            </a>
          </div>
        </article>
        {{- end -}}
      </div>
      {{- end -}}
    </div>
  </section>

</main>

<!-- Scripts -->
{{- $performance := resources.Get "js/performance.js" -}}
{{- if $performance -}}
  <script src="{{ $performance.Permalink }}" defer></script>
{{- end -}}

{{- $animations := resources.Get "js/animations.js" -}}
{{- if $animations -}}
  <script src="{{ $animations.Permalink }}" defer></script>
{{- end -}}

{{ end }}
