{{ define "main" }}
{{- $project := .Params.project -}}
{{- $isRTL := eq .Site.Language.LanguageDirection "rtl" -}}

<!-- Font Awesome CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- App Bar CSS -->
{{- $appBarCSS := resources.Get "css/app-bar.css" -}}
{{- if $appBarCSS -}}
<link rel="stylesheet" href="{{ $appBarCSS.RelPermalink }}" />
{{- end -}}

<!-- Premium Effects CSS -->
{{- $premiumCSS := resources.Get "css/premium-effects.css" -}}
{{- if $premiumCSS -}}
<link rel="stylesheet" href="{{ $premiumCSS.RelPermalink }}" />
{{- end -}}

<!-- Custom Overrides CSS -->
{{- $overridesCSS := resources.Get "css/custom-overrides.css" -}}
{{- if $overridesCSS -}}
<link rel="stylesheet" href="{{ $overridesCSS.RelPermalink }}" />
{{- end -}}

<style>
  .project-page { --project-color: {{ $project.color }}; --project-gradient: {{ $project.gradient | safeCSS }}; }
  .project-gradient { background: {{ $project.gradient | safeCSS }}; }
  .text-project { color: {{ $project.color }}; }
  .bg-project { background-color: {{ $project.color }}; }
  .bg-project-light { background-color: {{ $project.color }}15; }
  .border-project { border-color: {{ $project.color }}; }
  .hover\:bg-project:hover { background-color: {{ $project.color }}; }
  .hover\:text-project:hover { color: {{ $project.color }}; }
  .shadow-project { box-shadow: 0 10px 40px -10px {{ $project.color }}50; }
  @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
  .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
  .animate-float { animation: float 3s ease-in-out infinite; }
</style>

<!-- App Bar Header -->

<div class="project-page pt-20" {{ if $isRTL }}dir="rtl"{{ end }}>
  <!-- Hero Section -->
  <section class="relative min-h-[80vh] flex items-center overflow-hidden">
    <div class="absolute inset-0 project-gradient opacity-5"></div>
    <div class="absolute top-0 {{ if $isRTL }}left-0{{ else }}right-0{{ end }} w-1/2 h-full project-gradient opacity-10 blur-3xl"></div>
    <div class="absolute bottom-0 {{ if $isRTL }}right-0{{ else }}left-0{{ end }} w-96 h-96 project-gradient opacity-20 blur-3xl rounded-full"></div>
    
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10 py-16">
      <div class="grid lg:grid-cols-2 gap-12 lg:gap-20 items-center">
        <div class="text-center {{ if $isRTL }}lg:text-right{{ else }}lg:text-left{{ end }}">
          <a href="{{ "/#projects" | relLangURL }}" class="inline-flex items-center gap-2 text-[#545454] hover:text-project mb-8 transition-colors group {{ if $isRTL }}flex-row-reverse{{ end }}">
            <svg class="w-5 h-5 {{ if $isRTL }}rotate-180 group-hover:translate-x-1{{ else }}group-hover:-translate-x-1{{ end }} transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
            <span class="font-medium">{{ i18n "project_back_to_projects" }}</span>
          </a>
          
          <div class="flex items-center gap-5 justify-center {{ if $isRTL }}lg:justify-end flex-row-reverse{{ else }}lg:justify-start{{ end }} mb-8 animate-fade-in-up">
            <div class="w-24 h-24 rounded-3xl project-gradient flex items-center justify-center text-white shadow-2xl shadow-project animate-float">
              {{- if $project.iconClass -}}<i class="{{ $project.iconClass }} text-4xl"></i>{{- else -}}<span class="text-4xl font-bold">{{ substr $project.name 0 1 }}</span>{{- end -}}
            </div>
            <div class="{{ if $isRTL }}text-right{{ end }}">
              <h1 class="text-4xl lg:text-5xl xl:text-6xl font-extrabold text-[#252525] tracking-tight">{{ $project.name }}</h1>
              <p class="text-xl lg:text-2xl font-semibold text-project mt-1">{{ $project.tagline }}</p>
            </div>
          </div>
          
          <h2 class="text-2xl lg:text-3xl xl:text-4xl font-bold text-[#252525] mb-6 leading-tight">{{ $project.hero.title }}</h2>
          <p class="text-lg lg:text-xl text-[#545454] mb-8 max-w-xl {{ if $isRTL }}mr-auto lg:mr-0{{ else }}mx-auto lg:mx-0{{ end }} leading-relaxed">{{ $project.hero.subtitle }}</p>
          
          <div class="flex flex-wrap gap-4 justify-center {{ if $isRTL }}lg:justify-end{{ else }}lg:justify-start{{ end }}">
            <a href="#" class="bg-project text-white hover:shadow-project shadow-lg px-8 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:-translate-y-1">
              {{ $project.hero.cta_primary | default (i18n "project_get_started") }}
            </a>
            <a href="#features" class="bg-white text-project border-2 border-project hover:bg-project-light px-8 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:-translate-y-1">
              {{ $project.hero.cta_secondary | default (i18n "project_learn_more") }}
            </a>
          </div>
        </div>
        
        <div class="relative hidden lg:block {{ if $isRTL }}order-first{{ end }}">
          {{ with $project.hero.image }}
          <div class="relative z-10 rounded-3xl overflow-hidden shadow-2xl shadow-project transform hover:scale-[1.02] transition-transform duration-500">
            <img src="{{ . | relURL }}" alt="{{ $project.name }}" class="w-full h-auto">
          </div>
          {{ else }}
          <div class="relative z-10 rounded-3xl overflow-hidden shadow-2xl shadow-project transform hover:scale-[1.02] transition-transform duration-500 bg-gray-100 h-96 flex items-center justify-center">
            <div class="w-32 h-32 rounded-2xl project-gradient flex items-center justify-center text-white">
              {{- if $project.iconClass -}}<i class="{{ $project.iconClass }} text-5xl"></i>{{- else -}}<span class="text-5xl font-bold">{{ substr $project.name 0 1 }}</span>{{- end -}}
            </div>
          </div>
          {{ end }}
          <div class="absolute -bottom-10 {{ if $isRTL }}-left-10{{ else }}-right-10{{ end }} w-64 h-64 project-gradient opacity-30 rounded-full blur-3xl"></div>
          <div class="absolute -top-10 {{ if $isRTL }}-right-10{{ else }}-left-10{{ end }} w-48 h-48 project-gradient opacity-20 rounded-full blur-2xl"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  {{ with $project.features }}
  <section id="features" class="py-24 bg-gradient-to-b from-white to-gray-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <span class="inline-block px-4 py-2 rounded-full bg-project-light text-project font-semibold text-sm mb-4">{{ i18n "project_features_label" }}</span>
        <h2 class="text-3xl lg:text-4xl font-bold text-[#252525]">{{ i18n "project_key_features" }}</h2>
        <p class="text-lg text-[#545454] mt-4 max-w-2xl mx-auto">{{ i18n "project_features_subtitle" }} {{ $project.name }}</p>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {{ range . }}
        <div class="group bg-white rounded-3xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 {{ if $isRTL }}text-right{{ end }}">
          <div class="w-16 h-16 rounded-2xl project-gradient flex items-center justify-center mb-6 text-white text-2xl group-hover:scale-110 transition-transform {{ if $isRTL }}mr-auto{{ end }}">
            <i class="{{ .icon }}"></i>
          </div>
          <h3 class="text-xl font-bold text-[#252525] mb-3">{{ .title }}</h3>
          <p class="text-[#545454] leading-relaxed">{{ .description }}</p>
        </div>
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}


  <!-- Screenshot Gallery -->
  {{ partial "project-gallery.html" $project }}

  <!-- Content Section -->
  {{ if .Content }}
  <section class="py-24">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <div class="prose prose-lg max-w-none prose-headings:text-[#252525] prose-p:text-[#545454] prose-a:text-project prose-strong:text-[#252525]">
          {{ .Content }}
        </div>
      </div>
    </div>
  </section>
  {{ end }}

  <!-- FAQ Section -->
  {{ with $project.faq }}
  <section class="py-24 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <span class="inline-block px-4 py-2 rounded-full bg-project-light text-project font-semibold text-sm mb-4">{{ i18n "project_faq_label" }}</span>
        <h2 class="text-3xl lg:text-4xl font-bold text-[#252525]">{{ i18n "project_faq_title" }}</h2>
      </div>
      
      <div class="max-w-3xl mx-auto space-y-4">
        {{ range . }}
        <details class="group bg-white rounded-2xl shadow-md overflow-hidden">
          <summary class="flex justify-between items-center p-6 cursor-pointer list-none font-semibold text-[#252525] hover:text-project transition-colors {{ if $isRTL }}flex-row-reverse text-right{{ end }}">
            {{ .question }}
            <svg class="w-5 h-5 text-project transform group-open:rotate-180 transition-transform {{ if $isRTL }}mr-auto ml-0{{ else }}ml-auto mr-0{{ end }}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
          </summary>
          <div class="px-6 pb-6 text-[#545454] {{ if $isRTL }}text-right{{ end }}">{{ .answer }}</div>
        </details>
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}

  <!-- CTA Section -->
  <section class="py-24">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="relative rounded-3xl overflow-hidden project-gradient p-12 lg:p-20 text-center text-white">
        <div class="absolute inset-0 bg-black/10"></div>
        <div class="absolute top-0 {{ if $isRTL }}left-0{{ else }}right-0{{ end }} w-96 h-96 bg-white/10 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 {{ if $isRTL }}right-0{{ else }}left-0{{ end }} w-64 h-64 bg-white/10 rounded-full blur-2xl"></div>
        
        <div class="relative z-10">
          <h2 class="text-3xl lg:text-4xl xl:text-5xl font-bold mb-6">{{ i18n "project_cta_title" }}</h2>
          <p class="text-xl lg:text-2xl mb-10 opacity-90 max-w-2xl mx-auto">{{ i18n "project_cta_subtitle" }} {{ $project.name }}</p>
          
          <div class="flex flex-wrap gap-4 justify-center">
            <a href="#" class="bg-white text-project hover:bg-gray-100 px-8 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:-translate-y-1">
              {{ $project.hero.cta_primary | default (i18n "project_get_started") }}
            </a>
            <a href="#features" class="bg-white/20 text-white border-2 border-white/40 hover:bg-white/30 px-8 py-4 rounded-2xl font-bold transition-all duration-300 transform hover:-translate-y-1">
              {{ $project.hero.cta_secondary | default (i18n "project_learn_more") }}
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

{{ end }}
